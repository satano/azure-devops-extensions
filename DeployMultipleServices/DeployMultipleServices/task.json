{
	"$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
	"id": "0c143c0b-6078-42e5-adcb-9e6d3518f9cb",
	"name": "DeployMultipleServices",
	"friendlyName": "Deploy multiple services",
	"description": "Deploy multiple services to Azure Portal in parallel.",
	"helpMarkDown": "",
	"category": "Build",
	"visibility": [
		"Build"
	],
	"author": "Stano Pe≈•ko",
	"version": {
		"Major": 0,
		"Minor": 0,
		"Patch": 2
	},
	"instanceNameFormat": "Deploy services",
	"execution": {
		"PowerShell3": {
			"target": "DeployMultipleServices.ps1"
		}
	},
	"inputs": [
		{
			"name": "services",
			"type": "multiLine",
			"label": "Services",
			"defaultValue": "",
			"required": true,
			"helpMarkDown": "Logical name of the services, one name per line."
		},
		{
			"name": "resourceGroup",
			"type": "string",
			"label": "Resource group",
			"defaultValue": "",
			"required": true,
			"helpMarkDown": "Resource group name in Azure Portal."
		},
		{
			"name": "artifactsPath",
			"type": "string",
			"label": "Artifacts path",
			"defaultValue": "$(Pipeline.Workspace)",
			"required": true,
			"helpMarkDown": "Base path for services' source files. Service is deployed as ZIP file."
		},
		{
			"name": "appNameFormat",
			"type": "string",
			"label": "Format string for application name",
			"defaultValue": "{0}-api",
			"required": true,
			"helpMarkDown": "Format string for creating app service name in Azure Portal. Format string accepts one parameter `{0}`, which will be replace by the logical name of the service. For example if format string is `prod-{0}-api` and logical service name is `forecast`, the service will be deployed to `prod-forecast-api` app service."
		},
		{
			"name": "appPathFormat",
			"type": "string",
			"label": "Format string for application source",
			"defaultValue": "{0}/{1}.zip",
			"required": true,
			"helpMarkDown": "Format string for path to source ZIP file for services. Every service is deployed as ZIP file. The format string accepts two parameters. Parameter `{0}` is replaced by artifacts path, parameter `{1}` is replaced by logical service name. For example if format string is `{0}/publish/Company.{1}.zip` and logical service name is `forecast`, deployed file path will be `.../publish/Company.forecast.zip`. The three dots will be the path set in *Artifacts path*."
		}
	]
}
